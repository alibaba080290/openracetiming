{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _reactNativeNfcManager = _interopRequireWildcard(require(\"react-native-nfc-manager\"));\nvar _reactNative = require(\"react-native\");\nvar _reactNativePaper = require(\"react-native-paper\");\nvar _moment = _interopRequireDefault(require(\"moment\"));\nvar _LocalStorage = _interopRequireDefault(require(\"../lib/LocalStorage\"));\nvar _Utils = _interopRequireDefault(require(\"../lib/Utils\"));\nvar _Styles = _interopRequireDefault(require(\"../style/Styles\"));\nvar _CurrentRaceView = _interopRequireDefault(require(\"./CurrentRaceView\"));\nvar _native = require(\"@react-navigation/native\");\nvar _EntrantRecordLine = _interopRequireDefault(require(\"./EntrantRecordLine\"));\nvar _this = this,\n  _jsxFileName = \"/home/admin/openracetiming/src/components/Timing.tsx\";\nfunction _interopRequireWildcard(e, t) { if (\"function\" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) \"default\" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }\nvar Timing = function Timing(_ref) {\n  var navigation = _ref.navigation;\n  var _React$useState = _react.default.useState(false),\n    _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n    showStarted = _React$useState2[0],\n    setShowStarted = _React$useState2[1];\n  var _React$useState3 = _react.default.useState(0),\n    _React$useState4 = (0, _slicedToArray2.default)(_React$useState3, 2),\n    startTime = _React$useState4[0],\n    setStartTime = _React$useState4[1];\n  var _React$useState5 = _react.default.useState(''),\n    _React$useState6 = (0, _slicedToArray2.default)(_React$useState5, 2),\n    resultsContent = _React$useState6[0],\n    setResultsContent = _React$useState6[1];\n  var _React$useState7 = _react.default.useState(false),\n    _React$useState8 = (0, _slicedToArray2.default)(_React$useState7, 2),\n    displayButtons = _React$useState8[0],\n    setDisplayButtons = _React$useState8[1];\n  var _React$useState9 = _react.default.useState(false),\n    _React$useState0 = (0, _slicedToArray2.default)(_React$useState9, 2),\n    finished = _React$useState0[0],\n    setFinished = _React$useState0[1];\n  var _React$useState1 = _react.default.useState([]),\n    _React$useState10 = (0, _slicedToArray2.default)(_React$useState1, 2),\n    finishrows = _React$useState10[0],\n    setFinishrows = _React$useState10[1];\n  var _React$useState11 = _react.default.useState({}),\n    _React$useState12 = (0, _slicedToArray2.default)(_React$useState11, 2),\n    currentRace = _React$useState12[0],\n    setCurrentRace = _React$useState12[1];\n  var _React$useState13 = _react.default.useState(''),\n    _React$useState14 = (0, _slicedToArray2.default)(_React$useState13, 2),\n    debugContent = _React$useState14[0],\n    setDebugContent = _React$useState14[1];\n  var initialiseFromLocalStorage = function initialiseFromLocalStorage() {\n    _LocalStorage.default.getStartTime(_Utils.default.getRaceKey(currentRace)).then(function (timestamp) {\n      if (timestamp) {\n        setStartTime(parseInt(timestamp));\n        if (!finished) {\n          setShowStarted(true);\n          setDisplayButtons(true);\n        }\n      }\n    }).catch(function (e) {\n      return setDebugContent(JSON.stringify(e));\n    });\n  };\n  (0, _native.useFocusEffect)(function () {\n    if (!currentRace || Object.keys(currentRace).length === 0) {\n      _LocalStorage.default.getCurrentRace().then(function (raceDetails) {\n        if (raceDetails) {\n          setCurrentRace(JSON.parse(raceDetails));\n        }\n      });\n    }\n  });\n  var writeTime = function writeTime() {\n    var entrantId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'unknown';\n    var timeNow = Date.now();\n    var elapsed = timeNow - startTime;\n    _LocalStorage.default.writeFinishTime(_Utils.default.getRaceKey(currentRace), elapsed, entrantId).then(function () {\n      _LocalStorage.default.getEntrant(_Utils.default.getRaceKey(currentRace), entrantId).then(function (entrant) {\n        var entrantObj = JSON.parse(entrant);\n        var timeString = (0, _moment.default)(elapsed).format('HH:mm:ss.S');\n        entrantObj.finishtime = timeString;\n        var newFinishrows = [].concat((0, _toConsumableArray2.default)(finishrows), [_react.default.createElement(_EntrantRecordLine.default, {\n          record: entrantObj,\n          fieldsToDisplay: [].concat((0, _toConsumableArray2.default)(Object.keys(entrantObj).slice(0, 2)), ['finishtime']),\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 15\n          }\n        })]);\n        setFinishrows(newFinishrows);\n      }).catch(function (e) {\n        return setDebugContent(JSON.stringify(e.message));\n      });\n    }).catch(function (e) {\n      return setDebugContent(JSON.stringify(e.message));\n    });\n  };\n  _react.default.useEffect(function () {\n    var initNfc = function () {\n      var _ref2 = (0, _asyncToGenerator2.default)(function* () {\n        yield _reactNativeNfcManager.default.registerTagEvent();\n        if (!showStarted) {\n          initialiseFromLocalStorage();\n        }\n        _reactNativeNfcManager.default.setEventListener(_reactNativeNfcManager.NfcEvents.DiscoverTag, function (tag) {\n          if (showStarted) {\n            writeTime(tag.id);\n          } else {\n            setResultsContent('Testing NFC tag: ' + tag.id);\n          }\n        });\n      });\n      return function initNfc() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    initNfc().catch(function (e) {\n      return setDebugContent(e.message);\n    });\n  });\n  var startEvent = function startEvent() {\n    var now = Date.now();\n    setStartTime(now);\n    _LocalStorage.default.setStartTime(_Utils.default.getRaceKey(currentRace), now);\n    setShowStarted(true);\n    setDisplayButtons(true);\n  };\n  var finishRace = function finishRace() {\n    setShowStarted(false);\n    _reactNativeNfcManager.default.cancelTechnologyRequest().catch(function (e) {\n      return _reactNative.Alert.alert(JSON.stringify(e));\n    });\n    setDisplayButtons(false);\n    setFinished(true);\n    setShowStarted(false);\n    navigation.jumpTo('Identify');\n  };\n  return _react.default.createElement(_reactNative.View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 5\n    }\n  }, _react.default.createElement(_CurrentRaceView.default, {\n    raceDetails: currentRace,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }\n  }), showStarted ? _react.default.createElement(_reactNative.Button, {\n    color: _Styles.default.button.color,\n    onPress: function onPress() {\n      writeTime();\n    },\n    title: \"Record a finish\",\n    disabled: showStarted,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }) : _react.default.createElement(_reactNative.Button, {\n    color: _Styles.default.button.color,\n    onPress: function onPress() {\n      return startEvent();\n    },\n    title: \"Start\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }), _react.default.createElement(_reactNative.Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }\n  }, startTime ? new Date(startTime).toLocaleString() : ''), _react.default.createElement(_reactNative.View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }\n  }, _react.default.createElement(_reactNativePaper.DataTable, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }, finishrows)), _react.default.createElement(_reactNative.Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }\n  }, debugContent), _react.default.createElement(_reactNative.Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }\n  }, resultsContent), _react.default.createElement(_reactNative.Button, {\n    onPress: function onPress() {\n      finishRace();\n    },\n    disabled: !displayButtons || showStarted,\n    title: \"Finish\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }\n  }));\n};\nvar _default = exports.default = Timing;","map":{"version":3,"names":["_react","_interopRequireDefault","require","_reactNativeNfcManager","_interopRequireWildcard","_reactNative","_reactNativePaper","_moment","_LocalStorage","_Utils","_Styles","_CurrentRaceView","_native","_EntrantRecordLine","_this","_jsxFileName","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","Timing","_ref","navigation","_React$useState","React","useState","_React$useState2","_slicedToArray2","showStarted","setShowStarted","_React$useState3","_React$useState4","startTime","setStartTime","_React$useState5","_React$useState6","resultsContent","setResultsContent","_React$useState7","_React$useState8","displayButtons","setDisplayButtons","_React$useState9","_React$useState0","finished","setFinished","_React$useState1","_React$useState10","finishrows","setFinishrows","_React$useState11","_React$useState12","currentRace","setCurrentRace","_React$useState13","_React$useState14","debugContent","setDebugContent","initialiseFromLocalStorage","LocalStorage","getStartTime","Utils","getRaceKey","then","timestamp","parseInt","catch","JSON","stringify","useFocusEffect","keys","length","getCurrentRace","raceDetails","parse","writeTime","entrantId","arguments","undefined","timeNow","Date","now","elapsed","writeFinishTime","getEntrant","entrant","entrantObj","timeString","moment","format","finishtime","newFinishrows","concat","_toConsumableArray2","createElement","record","fieldsToDisplay","slice","__self","__source","fileName","lineNumber","columnNumber","message","useEffect","initNfc","_ref2","_asyncToGenerator2","NfcManager","registerTagEvent","setEventListener","NfcEvents","DiscoverTag","tag","id","apply","startEvent","finishRace","cancelTechnologyRequest","Alert","alert","jumpTo","View","Button","color","styles","button","onPress","title","disabled","Text","toLocaleString","DataTable","_default","exports"],"sources":["/home/admin/openracetiming/src/components/Timing.tsx"],"sourcesContent":["/**\n\n */\n\nimport React from 'react';\nimport NfcManager, { NfcEvents } from 'react-native-nfc-manager';\nimport { Text, View, Button, Alert } from 'react-native';\nimport { DataTable } from 'react-native-paper';\nimport moment from 'moment';\nimport LocalStorage from '../lib/LocalStorage';\nimport Utils from '../lib/Utils';\nimport styles from '../style/Styles';\nimport CurrentRaceView from './CurrentRaceView';\nimport { useFocusEffect } from '@react-navigation/native';\n\nimport EntrantRecordLine from './EntrantRecordLine';\n// import CurrentRaceView from './CurrentRaceView';\n\nconst Timing = ({ navigation }) => {\n  const [showStarted, setShowStarted] = React.useState(false);\n  const [startTime, setStartTime] = React.useState(0);\n  const [resultsContent, setResultsContent] = React.useState('');\n  const [displayButtons, setDisplayButtons] = React.useState(false);\n  const [finished, setFinished] = React.useState(false);\n  const [finishrows, setFinishrows] = React.useState([]);\n  const [currentRace, setCurrentRace] = React.useState({});\n  const [debugContent, setDebugContent] = React.useState('');\n\n  const initialiseFromLocalStorage = () => {\n    //need to handle case where race is finished\n\n    LocalStorage.getStartTime(Utils.getRaceKey(currentRace))\n      .then((timestamp: string | null) => {\n        if (timestamp) {\n          setStartTime(parseInt(timestamp));\n          if (!finished) {\n            setShowStarted(true);\n            setDisplayButtons(true);\n          }\n        }\n      })\n      .catch((e) => setDebugContent(JSON.stringify(e)));\n  };\n\n  useFocusEffect(() => {\n    if (!currentRace || Object.keys(currentRace).length === 0) {\n      LocalStorage.getCurrentRace().then((raceDetails) => {\n        if (raceDetails) {\n          setCurrentRace(JSON.parse(raceDetails));\n        }\n      });\n    }\n  });\n\n  const writeTime = (entrantId: string = 'unknown') => {\n    const timeNow = Date.now();\n    const elapsed = timeNow - startTime;\n    LocalStorage.writeFinishTime(\n      Utils.getRaceKey(currentRace),\n      elapsed,\n      entrantId\n    )\n      .then(() => {\n        LocalStorage.getEntrant(Utils.getRaceKey(currentRace), entrantId)\n          .then((entrant) => {\n            let entrantObj = JSON.parse(entrant);\n\n            const timeString = moment(elapsed).format('HH:mm:ss.S');\n            entrantObj.finishtime = timeString;\n            const newFinishrows = [\n              ...finishrows,\n              <EntrantRecordLine\n                record={entrantObj}\n                fieldsToDisplay={[\n                  ...Object.keys(entrantObj).slice(0, 2),\n                  'finishtime',\n                ]}\n              />,\n            ];\n            setFinishrows(newFinishrows);\n          })\n          .catch((e) => setDebugContent(JSON.stringify(e.message)));\n      })\n\n      .catch((e) => setDebugContent(JSON.stringify(e.message)));\n  };\n\n  React.useEffect(() => {\n    const initNfc = async () => {\n      await NfcManager.registerTagEvent();\n\n      //   });\n      //\n      //   React.useEffect(() => {\n      if (!showStarted) {\n        initialiseFromLocalStorage();\n      }\n      NfcManager.setEventListener(NfcEvents.DiscoverTag, (tag: any) => {\n        if (showStarted) {\n          writeTime(tag.id);\n        } else {\n          setResultsContent('Testing NFC tag: ' + tag.id);\n        }\n      });\n    };\n    initNfc().catch((e) => setDebugContent(e.message));\n  });\n\n  const startEvent = () => {\n    const now = Date.now();\n    setStartTime(now);\n    LocalStorage.setStartTime(Utils.getRaceKey(currentRace), now);\n    setShowStarted(true);\n    setDisplayButtons(true);\n  };\n\n  const finishRace = () => {\n    setShowStarted(false);\n    NfcManager.cancelTechnologyRequest().catch((e) =>\n      Alert.alert(JSON.stringify(e))\n    );\n    //displayResultsFromLocalContent();\n\n    setDisplayButtons(false);\n    setFinished(true);\n    setShowStarted(false);\n    navigation.jumpTo('Identify');\n  };\n\n  return (\n    <View>\n      <CurrentRaceView raceDetails={currentRace} />\n      {showStarted ? (\n        <Button\n          color={styles.button.color}\n          onPress={() => {\n            writeTime();\n          }}\n          title=\"Record a finish\"\n          disabled={showStarted}\n        />\n      ) : (\n        <Button\n          color={styles.button.color}\n          onPress={() => startEvent()}\n          title=\"Start\"\n        />\n      )}\n\n      <Text>{startTime ? new Date(startTime).toLocaleString() : ''}</Text>\n      <View>\n        <DataTable>{finishrows}</DataTable>\n      </View>\n      <Text>{debugContent}</Text>\n      <Text>{resultsContent}</Text>\n\n      <Button\n        onPress={() => {\n          finishRace();\n        }}\n        disabled={!displayButtons || showStarted}\n        title=\"Finish\"\n      />\n    </View>\n  );\n};\n\nexport default Timing;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}